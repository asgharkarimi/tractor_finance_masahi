# استفاده از نقشه OpenStreetMap

## تغییرات اعمال شده

### ✅ مزایا:
- **رایگان و بدون محدودیت** - نیازی به API Key نیست
- **بدون نیاز به ثبت‌نام** - مستقیماً کار می‌کند
- **نقشه‌های OpenStreetMap** - دقیق و به‌روز
- **آفلاین کش** - نقشه‌های بارگذاری شده ذخیره می‌شوند

### 📦 پکیج‌های استفاده شده:
- `flutter_map` - نمایش نقشه
- `latlong2` - کار با مختصات جغرافیایی
- `geolocator` - دریافت موقعیت فعلی

## نحوه استفاده:

### 1. در صفحه افزودن زمین:
- روی دکمه نقشه 🗺️ (کنار فیلد مساحت) کلیک کنید
- صفحه نقشه OpenStreetMap باز می‌شود

### 2. انتخاب نقاط زمین:
- روی نقشه کلیک کنید تا نقاط مرزی زمین را مشخص کنید
- هر نقطه با یک شماره مشخص می‌شود
- حداقل 3 نقطه نیاز است

### 3. مشاهده مساحت:
- بعد از انتخاب 3 نقطه، مساحت خودکار محاسبه می‌شود
- مساحت به هکتار نمایش داده می‌شود

### 4. ویرایش نقاط:
- **حذف آخرین نقطه**: دکمه Undo در بالا
- **پاک کردن همه**: دکمه Clear در بالا

### 5. تایید:
- روی "تایید و استفاده از این مساحت" کلیک کنید
- مساحت به صورت خودکار در فیلد وارد می‌شود

## ویژگی‌های نقشه:

### 🗺️ نوع نقشه:
- OpenStreetMap (نقشه رایگان و متن‌باز)
- نمایش جاده‌ها، شهرها، و مناطق

### 🎨 نمایش بصری:
- **نقاط**: دایره‌های سبز با شماره
- **چندضلعی**: پر شده با رنگ سبز شفاف
- **مرز**: خط سبز ضخیم

### 🔧 کنترل‌ها:
- **Zoom**: با دو انگشت یا دکمه‌های +/-
- **Pan**: کشیدن نقشه
- **Rotate**: چرخاندن با دو انگشت

## مقایسه با Google Maps:

| ویژگی | OpenStreetMap | Google Maps |
|-------|---------------|-------------|
| رایگان | ✅ بله | ❌ محدود |
| نیاز به API Key | ❌ خیر | ✅ بله |
| نیاز به ثبت‌نام | ❌ خیر | ✅ بله |
| دقت | ✅ خوب | ✅ عالی |
| تصاویر ماهواره | ❌ خیر | ✅ بله |
| سرعت | ✅ سریع | ✅ سریع |

## نکات مهم:

### ✅ مزایا:
1. بدون نیاز به تنظیمات اضافی
2. کاملاً رایگان
3. بدون محدودیت تعداد استفاده
4. کار با اینترنت ضعیف

### ⚠️ محدودیت‌ها:
1. نیاز به اتصال اینترنت برای بارگذاری نقشه
2. تصاویر ماهواره‌ای ندارد (فقط نقشه)
3. ممکن است در برخی مناطق جزئیات کمتری داشته باشد

### 💡 نکات کاربردی:
- برای دقت بیشتر، zoom را زیاد کنید
- نقاط را به ترتیب ساعتگرد یا پادساعتگرد انتخاب کنید
- می‌توانید نقاط بیشتری برای دقت بیشتر اضافه کنید

## عیب‌یابی:

### نقشه بارگذاری نمی‌شود:
1. ✅ اتصال اینترنت را بررسی کنید
2. ✅ مجوز اینترنت در AndroidManifest موجود است
3. ✅ چند ثانیه صبر کنید تا نقشه بارگذاری شود

### مساحت اشتباه است:
1. ✅ نقاط را به ترتیب انتخاب کنید
2. ✅ از zoom مناسب استفاده کنید
3. ✅ نقاط بیشتری اضافه کنید

### نقشه خیلی کند است:
1. ✅ اتصال اینترنت خود را بررسی کنید
2. ✅ zoom را کمتر کنید
3. ✅ صبر کنید تا کش شود

## منابع نقشه:

نقشه‌ها از **OpenStreetMap** دریافت می‌شوند:
- سرور: `https://tile.openstreetmap.org`
- لایسنس: Open Database License (ODbL)
- مشارکت‌کنندگان: جامعه جهانی OpenStreetMap
