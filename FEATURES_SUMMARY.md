# خلاصه قابلیت‌های اپلیکیشن

## ✅ قابلیت‌های اصلی (موجود و کار می‌کنند):

### 1️⃣ مدیریت کشاورزان
- ✅ افزودن کشاورز جدید
- ✅ ویرایش اطلاعات کشاورز
- ✅ حذف کشاورز
- ✅ مشاهده لیست کشاورزان
- ✅ مشاهده جزئیات هر کشاورز

### 2️⃣ مدیریت زمین‌ها
- ✅ افزودن زمین برای هر کشاورز
- ✅ نام زمین (اختیاری)
- ✅ مساحت به هکتار
- ✅ توضیحات اضافی
- ✅ عکس زمین (از گالری یا دوربین)
- ✅ حذف زمین
- ✅ محاسبه خودکار هزینه

### 3️⃣ مدیریت پرداخت‌ها
- ✅ ثبت پرداخت
- ✅ تاریخ پرداخت
- ✅ مبلغ پرداخت
- ✅ یادداشت (اختیاری)
- ✅ حذف پرداخت
- ✅ محاسبه خودکار باقیمانده

### 4️⃣ گزارش‌گیری
- ✅ خلاصه گزارش (مجموع درآمد، وصول شده، باقیمانده)
- ✅ جزئیات هر کشاورز
- ✅ دریافت گزارش PDF
- ✅ جداکننده هزارگان در اعداد

### 5️⃣ تنظیمات
- ✅ تعیین قیمت کشت هر هکتار
- ✅ ذخیره خودکار تنظیمات

### 6️⃣ رابط کاربری
- ✅ طراحی مدرن با رنگ سبز
- ✅ فونت فارسی Vazir
- ✅ راست‌چین (RTL)
- ✅ کارت‌های زیبا با گرادیانت
- ✅ آیکون‌های مناسب
- ✅ انیمیشن‌ها

## 🗺️ قابلیت نقشه (نیاز به تنظیم):

### محاسبه مساحت از روی نقشه
این قابلیت اضافه شده اما برای استفاده نیاز به این مراحل داره:

#### مرحله 1: اجرای مجدد اپلیکیشن
```bash
flutter clean
flutter pub get
flutter run
```

#### مرحله 2: دسترسی به قابلیت
1. صفحه اصلی → کلیک روی کشاورز
2. دکمه "افزودن زمین جدید"
3. کنار فیلد مساحت، دکمه سبز با آیکون نقشه 🗺️
4. کلیک روی دکمه نقشه

#### مرحله 3: استفاده از نقشه
- نقشه OpenStreetMap باز می‌شود (رایگان، بدون API Key)
- روی نقشه کلیک کنید تا نقاط مرزی زمین را مشخص کنید
- حداقل 3 نقطه نیاز است
- مساحت خودکار محاسبه می‌شود
- دکمه "My Location" برای رفتن به موقعیت فعلی
- دکمه "Undo" برای حذف آخرین نقطه
- دکمه "Clear" برای پاک کردن همه نقاط
- دکمه "تایید" برای استفاده از مساحت محاسبه شده

## 📊 آمار و اطلاعات:

### صفحه اصلی:
- تعداد کشاورزان
- مساحت کل هر کشاورز
- باقیمانده بدهی
- وضعیت (بدهکار/تسویه)

### صفحه جزئیات کشاورز:
- مساحت کل
- بدهی کل
- پرداختی
- باقیمانده
- لیست زمین‌ها با عکس
- لیست پرداخت‌ها

### صفحه گزارش:
- مجموع درآمد
- درآمد وصول شده
- درآمد وصول نشده
- جزئیات هر کشاورز
- دکمه دریافت PDF

## 🎨 ویژگی‌های طراحی:

- ✅ رنگ اصلی: سبز (#66BB6A)
- ✅ کارت‌های مدرن با سایه
- ✅ گرادیانت در هدرها
- ✅ آیکون‌های واضح و مناسب
- ✅ فاصله‌گذاری مناسب
- ✅ دکمه‌های بزرگ و قابل کلیک
- ✅ پیام‌های راهنما
- ✅ بج‌های رنگی برای وضعیت

## 💾 ذخیره‌سازی:

- ✅ پایگاه داده Hive (سریع و محلی)
- ✅ ذخیره خودکار
- ✅ بدون نیاز به اینترنت
- ✅ ذخیره عکس‌ها در حافظه دستگاه

## 📱 سازگاری:

- ✅ Android
- ✅ فارسی (RTL)
- ✅ تمام اندازه صفحه‌ها
- ✅ SafeArea در تمام صفحات

## 🔧 برای فعال‌سازی قابلیت نقشه:

اگر دکمه نقشه رو نمی‌بینی یا نقشه کار نمی‌کنه:

### گام 1: Clean و Rebuild
```bash
flutter clean
flutter pub get
flutter run
```

### گام 2: اجرای کامل
- اپلیکیشن رو کاملاً ببند (از Recent Apps)
- دوباره از IDE اجرا کن
- یا از دستور `flutter run` استفاده کن

### گام 3: چک کردن
- به صفحه "افزودن زمین جدید" برو
- کنار فیلد "مساحت (هکتار)" باید دکمه سبز با آیکون نقشه باشه
- اگر نیست، Hot Restart کن (نه Hot Reload)

## 📝 نکات مهم:

1. **Hot Reload کافی نیست** - باید Hot Restart کنی
2. **نقشه نیاز به اینترنت داره** - برای بارگذاری تایل‌ها
3. **مجوز Location** - اولین بار باید مجوز بدی
4. **جداکننده هزارگان** - در تمام مبالغ فعال هست
5. **PDF فارسی** - متن‌ها انگلیسی هستن (چون فونت فارسی مشکل داشت)

## 🐛 عیب‌یابی:

### دکمه نقشه نمایش داده نمی‌شود:
```bash
flutter clean
flutter pub get
flutter run
```

### نقشه خالی است:
- اتصال اینترنت را چک کنید
- چند ثانیه صبر کنید
- دکمه My Location را بزنید

### موقعیت کاربر نمایش داده نمی‌شود:
- مجوز Location را بدهید
- GPS را فعال کنید
- دکمه My Location را دوباره بزنید

### مساحت اشتباه است:
- نقاط را به ترتیب انتخاب کنید
- Zoom را زیاد کنید
- نقاط بیشتری اضافه کنید
