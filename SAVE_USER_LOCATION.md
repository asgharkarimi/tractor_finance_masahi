# ذخیره موقعیت کاربر

## ✅ قابلیت جدید: ذخیره موقعیت آخرین بار

### 🎯 نحوه کار:

1. **اولین بار**: 
   - نقشه موقعیت فعلی کاربر رو می‌گیره
   - موقعیت رو ذخیره می‌کنه

2. **دفعات بعد**:
   - نقشه روی آخرین موقعیت ذخیره شده باز میشه
   - نیازی به دریافت مجدد GPS نیست
   - سریع‌تر و بدون تاخیر

3. **دکمه My Location**:
   - هر وقت بزنی، موقعیت جدید رو می‌گیره
   - موقعیت جدید ذخیره میشه
   - دفعه بعد از همون موقعیت شروع میشه

### 💾 ذخیره‌سازی:

موقعیت در مدل `Settings` ذخیره میشه:
- `lastLatitude`: عرض جغرافیایی
- `lastLongitude`: طول جغرافیایی

### 🎨 مزایا:

- ✅ باز شدن سریع‌تر نقشه
- ✅ بدون نیاز به دریافت مجدد GPS
- ✅ نقشه روی محل کار کاربر باز میشه
- ✅ صرفه‌جویی در مصرف باتری

### 🔄 رفتار:

#### اولین بار:
```
باز کردن نقشه → دریافت موقعیت GPS → ذخیره → نمایش
```

#### دفعات بعد:
```
باز کردن نقشه → بارگذاری موقعیت ذخیره شده → نمایش فوری
```

#### کلیک My Location:
```
دریافت موقعیت جدید → ذخیره → نمایش
```

### 📍 مثال:

1. **روز اول**: نقشه باز میشه → موقعیت تهران ذخیره میشه
2. **روز دوم**: نقشه باز میشه → مستقیماً روی تهران باز میشه (بدون تاخیر)
3. **سفر به شهر دیگه**: دکمه My Location → موقعیت جدید ذخیره میشه
4. **دفعه بعد**: نقشه روی شهر جدید باز میشه

### ⚡ بهبود عملکرد:

- **قبل**: هر بار 3-5 ثانیه برای دریافت GPS
- **بعد**: فوری (0 ثانیه) با استفاده از موقعیت ذخیره شده

### 🔧 تنظیمات:

موقعیت در پایگاه داده Hive ذخیره میشه و:
- ✅ بین اجراهای مختلف حفظ میشه
- ✅ بدون نیاز به اینترنت
- ✅ سریع و کارآمد

## 🎉 نتیجه:

حالا نقشه همیشه روی آخرین موقعیت شناخته شده کاربر باز میشه!
